---
title: "Custom cursor hover effects with :has"
slug: custom-cursor-hover-effects-with-has
description: "This post will show up on its own!"
pubDate: 2023-01-31
draft: false
seed: 4
---

Every once and a while you see a website that has a custom cursor. Something like a little dot that follows your cursor around the screen and changes color or grows when you hover interactive elements. Especially on sites like awwwards there ar plenty of examples with a variety of this effects. The latest example I've seen which I found quite nice is by [Koto Studio](https://koto.studio/). While the implications on accessibility and usability are surely debatable, it's still a neat trick to play with.

When inspecting these websites I allways found there's a fair amount of javaScript that is used to create the effect. I started wondering if it was possible to create this effect with as little javaScript as possible. Ofcouse there's some javaScript needed to get the mouse position and apply it to the cursor. And with CSS custom properties we can pass the mouse coordinates as variables and let CSS do the rest. But what about mouse interactions such as hover? Well, we can use the `:has` pseudo-class to check if the cursor is hovering over an element and apply different styles to the custom cursor.

Custom properties to follow the cursor.

It's a neat effect. I'm not here to tell you if you should do it or not. I'm just here to show you how to do it.
When inspecting these websites, you'll notice that they use a custom element that follows the cursor.

This is a post with a custom cursor hover effect. It uses the `:has` pseudo-class to apply a custom cursor to the `a` element when it is hovered over.

The basic setup is to add an empty `<div class="cursor"></div>` element at the end of the body. This makes sure the cursor is always on top of other elements by default.

You could add a `z-index` to the cursor, but this is only necessary if you already have elements with a higher `z-index` on the page.

The javascript is pretty simple. We just need to get the mouse position and apply it to the document root as CSS custom properties. I'm adding px to the end of the values to make sure they can be used as CSS values. You could to that in CSS as well.

```javascript
document.addEventListener("mousemove", (e) => {
  document.documentElement.style.setProperty("--mx", e.x + "px");
  document.documentElement.style.setProperty("--my", e.y + "px");
});
```

Thatâ€™s all the JavaScript we need to let the custom cursor follow the mouse. We can now use the `--mx` and `--my` properties to position the cursor with CSS. Since the custom properties update when the mouse moves, the cursor will follow the mouse when we use them in the `top` and `left` properties. Or we can use the `translate` property to position the cursor.

```css
.cursor {
  --cursor-width: 20px;
  --cursor-height: 20px;
  width: var(--cursor-width);
  height: var(--cursor-height);
  position: absolute;
  /* position the cursor in the middle of the mouse with top and left */
  top: calc(var(--my) - var(--cursor-height) / 2);
  left: calc(var(--mx) - var(--cursor-width) / 2);
  /* or with translate */
  translate: calc(var(--mx) - var(--cursor-width) / 2) calc(
      var(--my) - var(--cursor-height) / 2
    );
  background-color: indigo;
  border-radius: 50%;
  transition: 0.25s ease;
  transition-property: scale, opacity;
  will-change: scale, opacity;
  pointer-events: none;
}
```

I'm using custom properties to set the width and height of the cursor. This makes it easy to change the size of the cursor in one place. To position the cursor in the middle of the mouse, I'm using the `calc` function to subtract half the width and height from the mouse position.

```css
.body:has(a:hover) .cursor {
  opacity: 0.75;
  scale: 2;
}

.demo:has(a:active) .cursor {
  scale: 1.5;
}
```

import CursorBasic from "../../components/Demos/Cursor/CursorBasic.svelte";

<CursorBasic client:idle />

The cursor is a simple div with a fixed width and height. The position is calculated using CSS custom properties. The `--x` and `--y` properties are set using JavaScript. The `:has` pseudo-class is used to check if the cursor is hovering over an `a` element. If it is, the cursor will grow and change color.

import Cursor from "../../components/Demos/Cursor/Cursor.svelte";

<Cursor client:idle />

---
layout: ../../layouts/PostLayout.astro
title: "Why responsive typography behaves weird on zoom"
pubDate: 2022-11-22
description: "This is the second post of my new Astro blog."
---

import Note from "../../components/Note.svelte";

Like most web designers, I want text to adjust to the available space. Type should not be too large on small screens or too small on large screens, which is where responsive typography comes in. However, when using the zoom functionality on desktop browsers seemingly unpredictable jumps in font-size occur, zooming in appears to slow down or cease responding and in some cases text size even decreases as you zoom in. Adrian Roselli has documented these behaviours in extend in <a href="https://adrianroselli.com/2019/12/responsive-type-and-zoom.html">his article</a>. I wanted to understand the cause of these issues, so I wrote this article to share what I learned.

<Note title="Pixels">
  I'm using pixels in this article's demos because it's simpler to explain.
  Using relative units makes the calculations more complicated. And in the end,
  browsers turn everything into pixels anyway.
</Note>
{/*
Responsive typography offers two techniques: static and fluid. Static responsive typography is based on a set of breakpoints, where each breakpoint triggers a new font size. This can be an effective way to ensure text looks good, but it is limited in that it only adjusts when the viewport crosses a breakpoint, while it ignores the changes between breakpoints. Fluid typography, however, allows for a more dynamic approach. It uses a mathematical formula to adjust font sizes as the viewport changes, allowing for a more natural display of typography across all viewport widths. Iâ€™ll look at both techniques and examine how they respond when zooming.
*/}

## What influences the eventual font-size

When applying a responsive type technique there 3 variables that influence the final computed font size of an elemtent. Window width, viewport width and user preference font-size. Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolor pariatur minima et. Perferendis ducimus nulla autem animi omnis non, enim molestias distinctio atque architecto cupiditate quod laboriosam placeat aliquam! Accusamus! Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolor pariatur minima et. Perferendis ducimus nulla autem animi omnis non, enim molestias distinctio atque architecto cupiditate quod laboriosam placeat aliquam! Accusamus! Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolor pariatur minima et. Perferendis ducimus nulla autem animi omnis non, enim molestias distinctio atque architecto cupiditate quod laboriosam placeat aliquam! Accusamus! Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolor pariatur minima et. Perferendis ducimus nulla autem animi omnis non, enim molestias distinctio atque architecto cupiditate quod laboriosam placeat aliquam! Accusamus!

## What happens when zooming

Zooming on desktop based browsers changes the device pixel ratio. That's the ratio between CSS pixels and device pixels. For example: on a macbook's retina display the device pixel ratio is 2, meaning 1 CSS pixel is 2 device pixels. Zooming in increases the device pixel ratio, making CSS pixels larger. When you zoom in to 500% 1 CSS pixel is now 10 device pixels. The same CSS pixel value now represents a larger area on the screen. This is why zooming in makes everything larger, including text. Everything except for the viewport, which actually gets smaller. Because pixels are now 5 times larger there are now 5 times less pixels to fill up the viewport, making it 5 times smaller. So zooming in on to 500% on a 1920px wide window makes the viewport 1920px / 5 = 384px wide.

Here's a pixel to demonstrate this; try zooming in on it on a webkit or chromium based browser. On Chrome you can zoom in to 500%. At that point the pixel will be 5 times as wide. Take a screenshot if you don't believe me.

import Pixel from "../../components/Demos/ResponsiveType/Pixel.svelte";

<Pixel />

If you're viewing this on firefox there's a good chance the pixel doesn't get larger. That's because Firefox has a setting to zoom text only. If you disable that setting zooming works the same as webkit and chromium browsers. When enabled there's some kind of black magic going on. I haven't figured out what it actually does and how this affects responsive typography.

That's why if you look at the computed font-size of an element after zooming in it won't have changed. The font-size is still the same, it's just the pixels that got larger. If you want to know what the visual font-size is you have to multiply it with the zoom level percentage. So this explains why zooming works when declaring everything in static pixels instead of relative units.

## Static responsive typopgraphy

Static responsive typography is based on a set of breakpoints, where each breakpoint triggers a new font size. I still find this to be an effective way to ensure text looks good, but it is limited in that it only adjusts when the viewport crosses a breakpoint, while it ignores the changes between breakpoints. And it comes with it's implications when zooming. Below is an example of how it works.

```css
h1 {
  font-size: 24px;
}

@media (min-width: 860px) {
  h1 {
    font-size: 32px;
  }
}

@media (min-width: 1140px) {
  h1 {
    font-size: 48px;
  }
}
```

When changing the window width the font-size changes as expected. In this case the window width and the viewport width are the same.

On a viewport width of 1680px we start at 48px. As we zoom in the viewport decreases in width. At first everything works fine, the text increases in size. At a zoom level of 140% the visual font-size is 67.2px. At a zoom level of 150% the viewport width is only 1120px wide so the the last media query doesn't apply anymore. After that point the font-size decreases to 32px. But with a zoom level of 150% the visual font-size is now 48px again. The same happens at a zoom level of 200%. The viewport is now only 840px wide so the font-size of the h1 is now only 24px, but with a zoom level of 200% the visual font-size is again 48px. So as we zoom in the font-size keeps turning back to 48px which gives the impression that the text decreases in size as you zoom in.
You could potentially write a media query for each zoom level and downscale the font-size value so that multiplied with the zoom level the visual font-size wouldn't appear to change at all. But only for a particular window width range. Because if you zoom in with a larger window the viewport width after zoom is also larger, so the media queries get triggered at different zoom levels. That's why it feels unpredictable and is rather complex to test. Below is a demo of how this behaves.

import Static from "../../components/Demos/ResponsiveType/Static.svelte";

<Static client:idle />

Try zooming in to 150% and 200%. Notice how the visual font-size keeps turning back to 48px. Then try zooming in again but this time with a larger window width. You'll notice the font-size doesn't turn back to 48px anymore. This is because the viewport width is now larger so the media queries get triggered at different zoom levels.

## Fluid typography

Lorem ipsum dolor sit amet consectetur adipisicing elit. Repudiandae repellat autem, quod maiores molestiae provident, eius atque dolorum quam cumque deserunt totam minima? Sit quae, nam sint voluptatibus molestias alias. Lorem ipsum dolor sit amet consectetur adipisicing elit. Repudiandae repellat autem, quod maiores molestiae provident, eius atque dolorum quam cumque deserunt totam minima? Sit quae, nam sint voluptatibus molestias alias.

import Test from "../../components/Demos/Test.svelte";

<Test client:idle />

I'm not advocating against responsive or fluid typography. I just wanted to know what actually happens. So I took a deep dive.

This could as well be seen as a feature and not a bug. Is it really broken? What looks more broken to you?

Everybody is looking at the maximum font-size. At a window width of 1680px the font-size without zooming is 48px so we expect that this value should increase according to the zoom level. But what if we didn't implement any responsive typography and just left the font-size at 32px? Zooming in to 400% would equal to a font-size of 128px. And there wouldn't be a problem. Using the fluid clamp formula zooming in to 400% would produce a font-size of 138px which is indeed only 287.5% of 48px but it's also 431.25% of 32px. So just because we chose to implement fluid typography there's now an accessibility problem.

As long as the computed font-size after zooming is larger than the minimum font-size I don't see a problem.

## Takeaways

- Fluid typography is not a good solution for responsive typography.
- Responsive typography is not a good solution for fluid typography.
- Fluid typography is a good solution for responsive typography.
- Responsive typography is a good solution for fluid typography.
